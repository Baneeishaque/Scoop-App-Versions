{
    "version": "4.9.8",
    "description": "A messaging app with a focus on speed and security",
    "homepage": "https://telegram.org",
    "license": "GPL-3.0-only",
    "architecture": {
        "32bit": {
            "hash": "ea625af6ac4ead6e818460fe23dfd5cc90f49a7b8b56e7c85aef44bd20eafe6d",
            "url": "https://github.com/telegramdesktop/tdesktop/releases/download/v4.9.8/tportable.4.9.8.zip"
        },
        "64bit": {
            "hash": "6b7463f040417776302d9d5d6c3f63082c53a74cefa192a7f8c3ba02f0ea8685",
            "url": "https://github.com/telegramdesktop/tdesktop/releases/download/v4.9.8/tportable-x64.4.9.8.zip"
        }
    },
    "extract_dir": "Telegram",
    "pre_install": "Set-Content \"$dir\\telegram-latest.cmd\" '@start \"Telegram\" /D \"%~dp0\" \"%~dp0Telegram.exe\" %*' -Encoding Ascii",
    "bin": "telegram-latest.cmd",
    "persist": "tdata",
    "shortcuts": [
        [
            "Telegram.exe",
            "Telegram (Latest)"
        ]
    ],
    "checkver": {
        "script": [
            "$latest = Select-String -InputObject $(Invoke-WebRequest -Uri \"https://github.com/telegramdesktop/tdesktop/releases/\").Content -Pattern 'tag/v([\\d.]+).+\\s.+\">(.+)<'",
            "if($latest.Matches.Groups[2].Value -ceq 'Pre-release'){",
            "$betaOrStable = '.beta'",
            "}",
            "else{",
            "$betaOrStable = ''",
            "}",
            "Write-Output \"$($latest.Matches.Groups[1].Value)$betaOrStable\""
        ],
        "regex": "(?<version>[\\d.]+)( (?<beta>\\.beta))*"
    },
    "autoupdate": {
        "architecture": {
            "32bit": {
                "url": "https://github.com/telegramdesktop/tdesktop/releases/download/v$version/tportable.$version$matchBeta.zip"
            },
            "64bit": {
                "url": "https://github.com/telegramdesktop/tdesktop/releases/download/v$version/tportable-x64.$version$matchBeta.zip"
            }
        }
    }
}
