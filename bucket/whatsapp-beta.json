{
    "version": "2.2317.3",
    "description": "A cross-platform messaging and Voice over IP service.",
    "homepage": "https://www.whatsapp.com",
    "license": {
        "identifier": "Freeware",
        "url": "https://www.whatsapp.com/legal/"
    },
    "architecture": {
        "64bit": {
            "url": "https://web.whatsapp.com/desktop-beta/windows/release/x64/WhatsApp-2.2317.3-full.nupkg#/dl.7z",
            "hash": "sha1:a13ec867344a4f59c1f78eca2f435468528ab75d"
        },
        "32bit": {
            "url": "https://web.whatsapp.com/desktop-beta/windows/release/ia32/WhatsApp-2.2317.3-full.nupkg#/dl.7z",
            "hash": "sha1:485328f6fa9764de2c1357889920a7f6d45edfef"
        }
    },
    "extract_dir": "lib\\net45",
    "pre_install": [
        "# WhatsApp cannot work under junctions ('current'), therefore we need to manually create the shortcut (see #4951)",
        "$scoop_startmenu_folder = Join-Path $([Environment]::GetFolderPath($(if ($global) {'commonstartmenu'} else {'startmenu'}))) 'Programs\\Scoop Apps'",
        "$exe_dir = versiondir 'whatsapp-beta' $version",
        "$wsShell = New-Object -ComObject WScript.Shell",
        "$wsShell = $wsShell.CreateShortcut(\"$scoop_startmenu_folder\\WhatsApp Beta.lnk\")",
        "$wsShell.TargetPath = \"$exe_dir\\whatsapp.exe\"",
        "$wsShell.WorkingDirectory = \"$exe_dir\"",
        "$wsShell.Save()"
    ],
    "uninstaller": {
        "script": [
            "$scoop_startmenu_folder = Join-Path $([Environment]::GetFolderPath($(if ($global) {'commonstartmenu'} else {'startmenu'}))) 'Programs\\Scoop Apps'",
            "Remove-Item \"$scoop_startmenu_folder\\WhatsApp Beta.lnk\" -Force"
        ]
    },
    "checkver": {
        "url": "https://web.whatsapp.com/desktop-beta/windows/release/x64/RELEASES",
        "regex": "WhatsApp-([\\d.]+)-full\\.nupkg",
        "reverse": true
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://web.whatsapp.com/desktop-beta/windows/release/x64/WhatsApp-$version-full.nupkg#/dl.7z"
            },
            "32bit": {
                "url": "https://web.whatsapp.com/desktop-beta/windows/release/ia32/WhatsApp-$version-full.nupkg#/dl.7z"
            }
        },
        "hash": {
            "url": "$baseurl/RELEASES"
        }
    }
}
